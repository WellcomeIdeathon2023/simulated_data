# README

No files should be uploaded to this folder, this is just used to demonstrate an example script with [teamWellcome_BearsLikeSandwiches_v1.R](example_challenge/teamWellcome_BearsLikeSandwiches_v1.R).

And if you're interested below is the output using the `reprex` package:

``` r
## load required libraries
library(ggplot2)

## seed for reproducibility
set.seed(0405)

## Data generation

# The code below will produce a data.frame with 100 rows and 6 columns with
#  the following variables:

# age - Continuous variable. Represents age of individuals. Generated from
#   Normal(50, 10) distribution, which we assumed because the average animal
#   is 50 with a 100 year variance
# likes_sandwiches - Continuous variable bounded in [0,1]. Represents probability
#   of whether an individual likes sandwiches. Generated by assuming a logistic
#   function based on the `age` variable and with an  offset to ensure we
#   detect probability increasing as age increases
# is_bear - Logical variable. Represents which observations in our dataset are
#   bears. Generated as Bernoulli(0.3)
# likes_marmalade - Continuous variable bounded in [0,1]. Represents probability
#   of whether an individual likes maramalade. Generated by assuming a logistic
#   function based on the `is_bear` variable and with an offset and some random
#   noise.
# likes_marmalade_sandwiches - Continuous variable bounded in [0,1]. Represents
#   probability of an individual liking marmalade sandwiches, defined by multiplying
#   `likes_sandwiches` and `likes_marmalade`
# age50 - Character variable, either "Age>=50" if `age > 50`, else "Age<50".
#   We recommend using for visualisation only.
# bear - Character variable, either "Bear!" if `is_bear`, else "Human".
#   We recommend using for visualisation only.

age = rnorm(100, 50, 10)
likes_sandwiches = round(1 / (1 + exp(-age + 55)), 2)
is_bear = as.logical(rbinom(100, 1, 0.3))
likes_marmalade = round(1 / (1 + exp(-is_bear - rnorm(100, 1e-2) - 0.5)), 2)
likes_marmalade_sandwiches = likes_sandwiches * likes_marmalade
age50 = ifelse(age > 50, "Age>=50", "Age<50")
bear = ifelse(is_bear, "Bear!", "Human")

# create data.frame
df = data.frame(
  age, age50, likes_sandwiches, bear, likes_marmalade,
  likes_marmalade_sandwiches
)

# quick meta stats
str(df)
#> 'data.frame':    100 obs. of  6 variables:
#>  $ age                       : num  60 55.3 43.1 42 55 ...
#>  $ age50                     : chr  "Age>=50" "Age>=50" "Age<50" "Age<50" ...
#>  $ likes_sandwiches          : num  0.99 0.57 0 0 0.51 0 0.32 0 0 0.24 ...
#>  $ bear                      : chr  "Human" "Human" "Human" "Human" ...
#>  $ likes_marmalade           : num  0.38 0.28 0.54 0.42 0.39 0.5 0.51 0.92 0.83 0.51 ...
#>  $ likes_marmalade_sandwiches: num  0.376 0.16 0 0 0.199 ...
head(df)
#>        age   age50 likes_sandwiches  bear likes_marmalade
#> 1 59.97333 Age>=50             0.99 Human            0.38
#> 2 55.29907 Age>=50             0.57 Human            0.28
#> 3 43.10109  Age<50             0.00 Human            0.54
#> 4 41.97861  Age<50             0.00 Human            0.42
#> 5 55.03236 Age>=50             0.51 Human            0.39
#> 6 49.18479  Age<50             0.00 Human            0.50
#>   likes_marmalade_sandwiches
#> 1                     0.3762
#> 2                     0.1596
#> 3                     0.0000
#> 4                     0.0000
#> 5                     0.1989
#> 6                     0.0000

# plot to check distributions as expected
ggplot(df, aes(x = likes_marmalade_sandwiches, color = age50, fill = bear)) +
  geom_density() +
  facet_grid(vars(age50), vars(bear)) +
  theme_bw()
```

![](https://i.imgur.com/uHYI93k.png)

``` r

# run logistic regression to confirm expected results
fit = glm(likes_marmalade_sandwiches > 0.5 ~ age + is_bear, binomial(link = "logit"))
fit
#> 
#> Call:  glm(formula = likes_marmalade_sandwiches > 0.5 ~ age + is_bear, 
#>     family = binomial(link = "logit"))
#> 
#> Coefficients:
#> (Intercept)          age  is_bearTRUE  
#>    -20.7169       0.3337       1.3947  
#> 
#> Degrees of Freedom: 99 Total (i.e. Null);  97 Residual
#> Null Deviance:       84.54 
#> Residual Deviance: 43.17     AIC: 49.17
summary(fit)
#> 
#> Call:
#> glm(formula = likes_marmalade_sandwiches > 0.5 ~ age + is_bear, 
#>     family = binomial(link = "logit"))
#> 
#> Deviance Residuals: 
#>      Min        1Q    Median        3Q       Max  
#> -2.19261  -0.34190  -0.11232  -0.01942   2.10335  
#> 
#> Coefficients:
#>              Estimate Std. Error z value Pr(>|z|)    
#> (Intercept) -20.71687    5.06821  -4.088 4.36e-05 ***
#> age           0.33368    0.08528   3.913 9.12e-05 ***
#> is_bearTRUE   1.39467    0.83271   1.675    0.094 .  
#> ---
#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
#> 
#> (Dispersion parameter for binomial family taken to be 1)
#> 
#>     Null deviance: 84.542  on 99  degrees of freedom
#> Residual deviance: 43.171  on 97  degrees of freedom
#> AIC: 49.171
#> 
#> Number of Fisher Scoring iterations: 7
```

<sup>Created on 2023-05-04 with [reprex v2.0.2](https://reprex.tidyverse.org)</sup>
